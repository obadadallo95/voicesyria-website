# ๐จ ุฅุฌุฑุงุกุงุช ุงูุทูุงุฑุฆ - ุชุบููุฑ ุงูููุงุชูุญ ุงููุณุฑุจุฉ
# Emergency Actions - Rotate Leaked Keys

## โ๏ธ ุชุญุฐูุฑ: ุชู ุชุณุฑูุจ ุงูููุงุชูุญ!

ุชู ุชุณุฑูุจ ุงูููุงุชูุญ ุงูุชุงููุฉ:
- `NEXT_PUBLIC_SUPABASE_ANON_KEY` โ๏ธ
- `SUPABASE_SERVICE_ROLE_KEY` ๐จ **ุฎุทูุฑ ุฌุฏุงู**

---

## ๐จ ุฅุฌุฑุงุกุงุช ููุฑูุฉ (ุฎูุงู 5 ุฏูุงุฆู)

### ุงูุฎุทูุฉ 1: ุชุบููุฑ ุงูููุงุชูุญ ูู Supabase Dashboard

1. **ุงุฐูุจ ุฅูู Supabase Dashboard ููุฑุงู**:
   - [https://supabase.com/dashboard](https://supabase.com/dashboard)
   - ุณุฌูู ุงูุฏุฎูู ุฅูู ุญุณุงุจู

2. **ุงุฎุชุฑ ูุดุฑูุนู**

3. **ุงุฐูุจ ุฅูู Settings โ API**

4. **ุบููุฑ ุงูููุงุชูุญ ุงูุชุงููุฉ**:

   #### ุฃ. ุชุบููุฑ Anon Key (Public)
   - ุงุจุญุซ ุนู **"anon public"** key
   - ุงุถุบุท ุนูู **"Reset"** ุฃู **"Regenerate"**
   - โ๏ธ **ุงูุณุฎ ุงูููุชุงุญ ุงูุฌุฏูุฏ ููุฑุงู** (ูู ุชุชููู ูู ุฑุคูุชู ูุฑุฉ ุฃุฎุฑู)

   #### ุจ. ุชุบููุฑ Service Role Key (Secret) ๐จ
   - ุงุจุญุซ ุนู **"service_role"** key
   - ุงุถุบุท ุนูู **"Reset"** ุฃู **"Regenerate"**
   - โ๏ธ **ุงูุณุฎ ุงูููุชุงุญ ุงูุฌุฏูุฏ ููุฑุงู** (ูู ุชุชููู ูู ุฑุคูุชู ูุฑุฉ ุฃุฎุฑู)
   - โ๏ธ **ูุฐุง ุงูููุชุงุญ ุฎุทูุฑ ุฌุฏุงู - ุงุญูุธู ูู ููุงู ุขูู**

---

### ุงูุฎุทูุฉ 2: ูุฑุงุฌุนุฉ ุณุฌูุงุช ุงููุตูู (ุฎูุงู 10 ุฏูุงุฆู)

1. **ูู Supabase Dashboard**:
   - ุงุฐูุจ ุฅูู **Logs** โ **API Logs**
   - ุฑุงุฌุน ุงูุณุฌูุงุช ููุจุญุซ ุนู:
     - ูุตูู ุบูุฑ ูุนุชุงุฏ
     - ุทูุจุงุช ูู IPs ุบูุฑ ูุนุฑููุฉ
     - ุทูุจุงุช ูู ุฃููุงุช ุบูุฑ ูุนุชุงุฏุฉ
     - ุฃุฎุทุงุก ุบูุฑ ุนุงุฏูุฉ

2. **ุฑุงุฌุน ูุงุนุฏุฉ ุงูุจูุงูุงุช**:
   - ุงุฐูุจ ุฅูู **Table Editor**
   - ุชุญูู ูู:
     - ุจูุงูุงุช ุฌุฏูุฏุฉ ุบูุฑ ูุชููุนุฉ
     - ุชุนุฏููุงุช ุนูู ุงูุจูุงูุงุช ุงูุญุณุงุณุฉ
     - ุญุฐู ุจูุงูุงุช

3. **ุฑุงุฌุน Authentication**:
   - ุงุฐูุจ ุฅูู **Authentication** โ **Users**
   - ุชุญูู ูู:
     - ูุณุชุฎุฏููู ุฌุฏุฏ ุบูุฑ ูุชููุนูู
     - ุฌูุณุงุช ูุดุทุฉ ุบูุฑ ูุนุฑููุฉ

---

### ุงูุฎุทูุฉ 3: ุชุญุฏูุซ Environment Variables ูู Vercel

1. **ุงุฐูุจ ุฅูู Vercel Dashboard**:
   - [https://vercel.com/dashboard](https://vercel.com/dashboard)
   - ุณุฌูู ุงูุฏุฎูู

2. **ุงุฎุชุฑ ูุดุฑูุนู**

3. **ุงุฐูุจ ุฅูู Settings โ Environment Variables**

4. **ุญุฏูุซ ุงููุชุบูุฑุงุช ุงูุชุงููุฉ**:

   ```
   NEXT_PUBLIC_SUPABASE_ANON_KEY = [ุงูููุชุงุญ ุงูุฌุฏูุฏ ูู Supabase]
   ```

   โ๏ธ **ููุงุญุธุฉ**: ุฅุฐุง ูุงู `SUPABASE_SERVICE_ROLE_KEY` ูุณุชุฎุฏูุงู ูู ุงููููุน:
   ```
   SUPABASE_SERVICE_ROLE_KEY = [ุงูููุชุงุญ ุงูุฌุฏูุฏ ูู Supabase]
   ```

5. **ุงุญูุธ ุงูุชุบููุฑุงุช**

6. **ุฃุนุฏ ูุดุฑ ุงููููุน ููุฑุงู**:
   - ุงุฐูุจ ุฅูู **Deployments**
   - ุงุฎุชุฑ ุขุฎุฑ deployment
   - ุงุถุบุท ุนูู **"Redeploy"**
   - ุงุฎุชุฑ **"Use existing Build Cache"** = โ (ูุง ุชุณุชุฎุฏู ุงููุงุด)

---

### ุงูุฎุทูุฉ 4: ุชุญุฏูุซ Environment Variables ูู Netlify (ุฅู ูุฌุฏ)

1. **ุงุฐูุจ ุฅูู Netlify Dashboard**:
   - [https://app.netlify.com](https://app.netlify.com)

2. **ุงุฎุชุฑ ูููุนู**

3. **ุงุฐูุจ ุฅูู Site Settings โ Environment Variables**

4. **ุญุฏูุซ ุงููุชุบูุฑุงุช ุจููุณ ุงูุทุฑููุฉ**

5. **ุฃุนุฏ ูุดุฑ ุงููููุน**

---

### ุงูุฎุทูุฉ 5: ุชุญุฏูุซ ุงููููุงุช ุงููุญููุฉ

1. **ุงูุชุญ ููู `.env.local`** (ุฅู ูุฌุฏ)

2. **ุญุฏูุซ ุงูููุงุชูุญ**:
   ```env
   NEXT_PUBLIC_SUPABASE_ANON_KEY=ุงูููุชุงุญ_ุงูุฌุฏูุฏ
   SUPABASE_SERVICE_ROLE_KEY=ุงูููุชุงุญ_ุงูุฌุฏูุฏ
   ```

3. **ุงุญูุธ ุงูููู**

4. **โ๏ธ ุชุฃูุฏ ูู ุฃู `.env.local` ููุฌูุฏ ูู `.gitignore`**

---

## ๐ ูุญุต ุงูุฃูุงู (ุฎูุงู 30 ุฏูููุฉ)

### 1. ูุญุต RLS Policies

1. **ูู Supabase Dashboard**:
   - ุงุฐูุจ ุฅูู **Authentication** โ **Policies**
   - ุฑุงุฌุน ุฌููุน ุงูุณูุงุณุงุช (Policies)
   - ุชุฃูุฏ ูู:
     - ุงูุณูุงุณุงุช ูุญุฏุฏุฉ ุจุดูู ุตุญูุญ
     - ูุง ุชูุฌุฏ ุณูุงุณุงุช ููุชูุญุฉ ุฌุฏุงู
     - ุงูุณูุงุณุงุช ุชุญูู ุงูุจูุงูุงุช ุงูุญุณุงุณุฉ

### 2. ูุญุต API Access

1. **ุงุฐูุจ ุฅูู Settings โ API**
2. **ุฑุงุฌุน**:
   - Rate Limiting settings
   - CORS settings
   - API restrictions

### 3. ูุญุต Database

1. **ุงุฐูุจ ุฅูู Table Editor**
2. **ุฑุงุฌุน**:
   - ุงูุจูุงูุงุช ุงูุญุณุงุณุฉ
   - ุงูุฌุฏุงูู ุงููููุฉ
   - Foreign keys ู Constraints

---

## ๐ ูุงุฆูุฉ ุงูุชุญูู

- [ ] ุชู ุชุบููุฑ `NEXT_PUBLIC_SUPABASE_ANON_KEY` ูู Supabase
- [ ] ุชู ุชุบููุฑ `SUPABASE_SERVICE_ROLE_KEY` ูู Supabase
- [ ] ุชู ูุณุฎ ุงูููุงุชูุญ ุงูุฌุฏูุฏุฉ
- [ ] ุชู ุชุญุฏูุซ Environment Variables ูู Vercel
- [ ] ุชู ุชุญุฏูุซ Environment Variables ูู Netlify (ุฅู ูุฌุฏ)
- [ ] ุชู ุฅุนุงุฏุฉ ูุดุฑ ุงููููุน
- [ ] ุชู ูุฑุงุฌุนุฉ ุณุฌูุงุช ุงููุตูู
- [ ] ุชู ูุญุต ูุงุนุฏุฉ ุงูุจูุงูุงุช
- [ ] ุชู ูุญุต RLS Policies
- [ ] ุชู ุชุญุฏูุซ `.env.local` (ุฅู ูุฌุฏ)
- [ ] ุชู ุงูุชุฃูุฏ ูู ุฃู `.env.local` ูู `.gitignore`

---

## ๐ก๏ธ ุฅุฌุฑุงุกุงุช ุฃูููุฉ ุฅุถุงููุฉ

### 1. ุชูุนูู Two-Factor Authentication (2FA)

1. **ูู Supabase Dashboard**:
   - ุงุฐูุจ ุฅูู **Account Settings**
   - ูุนูู **Two-Factor Authentication**

### 2. ูุฑุงุฌุนุฉ Team Members

1. **ูู Supabase Dashboard**:
   - ุงุฐูุจ ุฅูู **Settings** โ **Team**
   - ุฑุงุฌุน ุฌููุน ุงูุฃุนุถุงุก
   - ุงุญุฐู ุฃู ุฃุนุถุงุก ุบูุฑ ูุนุฑูููู

### 3. ุชูุนูู Audit Logs

1. **ูู Supabase Dashboard**:
   - ุงุฐูุจ ุฅูู **Settings** โ **Audit Logs**
   - ูุนูู **Audit Logging** (ุฅู ูุงู ูุชุงุญุงู)

### 4. ุชุญุฏูุซ RLS Policies

1. **ุฑุงุฌุน ุฌููุน Policies**
2. **ุชุฃูุฏ ูู**:
   - Policies ูุญุฏุฏุฉ ุจุดูู ุตุญูุญ
   - ูุง ุชูุฌุฏ policies ููุชูุญุฉ ุฌุฏุงู
   - ุงูุจูุงูุงุช ุงูุญุณุงุณุฉ ูุญููุฉ

---

## ๐ ูู ุญุงูุฉ ุงูุชุดุงู ูุตูู ุบูุฑ ูุตุฑุญ ุจู

### 1. ุฅุฌุฑุงุกุงุช ููุฑูุฉ

1. **ุบููุฑ ุฌููุน ุงูููุงุชูุญ ููุฑุงู**
2. **ุฃููู ุงููุตูู ุฅูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุคูุชุงู** (ุฅู ุฃููู)
3. **ุฑุงุฌุน ุฌููุน ุงูุณุฌูุงุช**
4. **ุงุญูุธ ุงูุฃุฏูุฉ** (screenshots, logs)

### 2. ุงูุงุชุตุงู ุจุงูุฏุนู

- **Supabase Support**: [https://supabase.com/support](https://supabase.com/support)
- **Vercel Support**: [https://vercel.com/support](https://vercel.com/support)

---

## โ๏ธ ุชุญุฐูุฑุงุช ูููุฉ

1. **ูุง ุชุดุงุฑู ุงูููุงุชูุญ ุงูุฌุฏูุฏุฉ** ูู:
   - Git
   - ุงูุฑุณุงุฆู
   - ุงููุญุงุฏุซุงุช
   - ุงููููุงุช ุงููุฑููุนุฉ

2. **ุงุณุชุฎุฏู Environment Variables ููุท**:
   - ูู Vercel/Netlify
   - ูู `.env.local` (ูุญูู ููุท)

3. **ุฑุงุฌุน ุงูุณุฌูุงุช ุจุงูุชุธุงู**:
   - ูุฑุฉ ุฃุณุจูุนูุงู ุนูู ุงูุฃูู
   - ุจุนุฏ ุฃู ุชุบููุฑ ูุจูุฑ

4. **ุงุญุชูุธ ุจูุณุฎุฉ ุงุญุชูุงุทูุฉ ูู ุงูููุงุชูุญ**:
   - ูู ููุงู ุขูู (password manager)
   - ูุดูุฑุฉ
   - ูุง ุชุถุนูุง ูู Git

---

## ๐ ููุงุฑุฏ ุฅุถุงููุฉ

- [Supabase Security Best Practices](https://supabase.com/docs/guides/platform/security)
- [Supabase RLS Guide](https://supabase.com/docs/guides/auth/row-level-security)
- [Vercel Environment Variables](https://vercel.com/docs/concepts/projects/environment-variables)

---

**โฐ ุงูููุช ุงูููุฏุฑ**: 15-30 ุฏูููุฉ  
**๐จ ุงูุฃููููุฉ**: ุนุงููุฉ ุฌุฏุงู  
**๐ ุชุงุฑูุฎ**: 2025-01-XX

